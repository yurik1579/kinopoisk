(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9826],{33092:function(e,t,i){"use strict";i.d(t,{jn:function(){return r.j},CO:function(){return c},hb:function(){return n}});const o=" \u2013 ";function n(e){let{start:t,end:i,delimiter:n=o}=e;return t?t===i?String(t):[t,i||"..."].join(n):null}var r=i(52423);function c(e){return(null===e||void 0===e?void 0:e.russian)||(null===e||void 0===e?void 0:e.original)||void 0}},56880:function(e,t,i){"use strict";i.d(t,{RI:function(){return X},J2:function(){return R},Au:function(){return C},H1:function(){return H}});var o=i(37667),n=i(88211),r=i.n(n),c=i(39048),a=i(92934),d=i(79933);const s=10,f="popover-root",l=450,u={width:0,height:0},p=[a.Direction.Top,a.Direction.Right,a.Direction.Bottom,a.Direction.Left],v=[a.Alignment.Middle,a.Alignment.Start,a.Alignment.End];var h=i(59408),m=i.n(h),g=i(42908);const S=e=>{let{children:t}=e;const{0:i,1:n}=(0,o.useState)(null);return(0,o.useEffect)((()=>{let e=document.getElementById(f);e||(e=document.createElement("div"),e.setAttribute("id",f),e.setAttribute("class",m().root),document.body.appendChild(e)),n(e)}),[]),i?(0,g.jsx)(g.Fragment,{children:t(i)}):null},z=e=>{let{children:t}=e;return(0,g.jsx)(S,{children:e=>(0,g.jsx)(d.h_,{container:e,children:t})})},y={height:10,width:10},w={vertical:a.Direction.Bottom,horizontal:a.Direction.Right};function x(e){let{eventXCoordinate:t,preferredPosition:i,popoverWidth:o,initiatorWidth:n,offset:r}=e;return function(e){let{eventXCoordinate:t,preferredPosition:i,popoverWidth:o,offset:n}=e;return i===a.Direction.Left?t-(o+n+s)>0:t+o+n+s>document.documentElement.clientWidth}({eventXCoordinate:t,preferredPosition:i,popoverWidth:o,offset:r})?t-o-r:t+r+n}function P(e){let{eventYCoordinate:t,preferredPosition:i,popoverHeight:o,initiatorHeight:n,offset:r}=e;return function(e){let{eventYCoordinate:t,preferredPosition:i,popoverHeight:o,offset:n}=e;return i===a.Direction.Top?t-(o+n+s)<0:t+o+n+s<document.documentElement.clientHeight}({eventYCoordinate:t,preferredPosition:i,popoverHeight:o,offset:r})?t+r+window.pageYOffset+n:t-o-r+window.pageYOffset}const C=e=>{let{initiatorCoordinates:{x:t,y:i},preferredPosition:o,initiatorSize:{height:n,width:r}=u,popoverSize:{height:c,width:a},offset:d}=e;return{coordinates:{x:x({eventXCoordinate:t,popoverWidth:a,initiatorWidth:r,preferredPosition:(null===o||void 0===o?void 0:o.horizontal)||w.horizontal,offset:(null===d||void 0===d?void 0:d.width)||0}),y:P({eventYCoordinate:i,popoverHeight:c,initiatorHeight:n,preferredPosition:(null===o||void 0===o?void 0:o.vertical)||w.vertical,offset:(null===d||void 0===d?void 0:d.height)||0})}}};function E(e){let{initiatorCoordinates:t,preferredPosition:i,popoverSize:o}=e;return C({initiatorCoordinates:t,preferredPosition:i,popoverSize:o,offset:y})}function A(e){return e===a.Direction.Left||e===a.Direction.Right}function D(e){return e===a.Direction.Top||e===a.Direction.Bottom}function b(e){let{coordinate:t,popoverSize:i,initiatorSize:o,clientSize:n}=e;return t-(i/2-o/2)>0&&t+o+(i/2-o/2)<n}function O(e){let{coordinate:t,popoverSize:i,offsetFromInitiator:o}=e;return t-(i+o)>0}function j(e){let{coordinate:t,popoverSize:i,initiatorSize:o,clientSize:n,offsetFromInitiator:r}=e;return t+o+i+r<n}function F(e){let{alignment:t,coordinate:i,initiatorSize:o,popoverSize:n,offsetAlongAlignmentAxis:r,pageOffset:c=0}=e;return t===a.Alignment.Middle?i+o/2-n/2+c:t===a.Alignment.Start?i-(n+r)+c:t===a.Alignment.End?i+n+r+c:0}function I(e){let{coordinate:t,offsetFromInitiator:i,popoverSize:o}=e;return t-(o+i+s)>0}function _(e){let{coordinate:t,offsetFromInitiator:i,popoverSize:o,initiatorSize:n,clientSize:r}=e;return t+o+i+n+s<r}function T(e,t){let i=e;var o;return t&&(o=t,i=i.sort(((e,t)=>e===o?-1:t===o?1:0))),i}const H=e=>{let{initiatorCoordinates:t,popoverSize:i,initiatorSize:o={width:0,height:0},preferredPosition:{direction:n,alignment:r}={},offset:c={},positionPriority:{direction:d=p,alignment:s=v}={},isFixed:f=!1}=e;const l=T(d,n),u=T(s,r),h=function(e){let{initiatorCoordinates:{x:t,y:i},directions:o,popoverSize:{width:n,height:r},offset:{offsetFromInitiator:c=0},initiatorSize:{width:d,height:s}}=e;return o.find((e=>e===a.Direction.Top?I({coordinate:i,popoverSize:r,offsetFromInitiator:c}):e===a.Direction.Bottom?_({coordinate:i,popoverSize:r,initiatorSize:s,clientSize:document.documentElement.clientHeight,offsetFromInitiator:c}):e===a.Direction.Left?I({coordinate:t,popoverSize:n,offsetFromInitiator:c}):e===a.Direction.Right&&_({coordinate:t,popoverSize:n,initiatorSize:d,clientSize:document.documentElement.clientWidth,offsetFromInitiator:c})))||o[0]}({initiatorCoordinates:t,popoverSize:i,initiatorSize:o,directions:l,offset:c}),m=function(e){let{initiatorCoordinates:{x:t,y:i},alignments:o,direction:n,popoverSize:{width:r,height:c},offset:{offsetFromInitiator:d=0},initiatorSize:{width:s,height:f}}=e;return o.find((e=>{if(D(n)){if(e===a.Alignment.Middle)return b({popoverSize:r,initiatorSize:s,coordinate:t,clientSize:document.documentElement.clientWidth});if(e===a.Alignment.Start)return O({coordinate:t,popoverSize:r,offsetFromInitiator:d});if(e===a.Alignment.End)return j({popoverSize:r,initiatorSize:s,coordinate:t,clientSize:document.documentElement.clientWidth,offsetFromInitiator:d})}if(A(n)){if(e===a.Alignment.Middle)return b({popoverSize:c,initiatorSize:f,coordinate:i,clientSize:document.documentElement.clientHeight});if(e===a.Alignment.Start)return O({coordinate:i,popoverSize:c,offsetFromInitiator:d});if(e===a.Alignment.End)return j({popoverSize:c,initiatorSize:f,coordinate:i,clientSize:document.documentElement.clientHeight,offsetFromInitiator:d})}return!1}))||o[0]}({initiatorCoordinates:t,popoverSize:i,initiatorSize:o,alignments:u,offset:c,direction:h}),g=function(e){let{initiatorCoordinates:{x:t,y:i},alignment:o,direction:n,popoverSize:{width:r,height:c},offset:{offsetFromInitiator:d=0,offsetAlongAlignmentAxis:s=0},initiatorSize:{width:f,height:l},isFixed:u}=e;const p={x:0,y:0},v=u?0:window.pageYOffset;return D(n)&&(p.x=F({coordinate:t,popoverSize:r,initiatorSize:f,offsetAlongAlignmentAxis:s,alignment:o}),n===a.Direction.Top&&(p.y=i-(c+d)+v),n===a.Direction.Bottom&&(p.y=i+l+d+v)),A(n)&&(p.y=F({coordinate:i,popoverSize:c,initiatorSize:l,offsetAlongAlignmentAxis:s,alignment:o,pageOffset:v}),n===a.Direction.Left&&(p.x=t-(r+d)),n===a.Direction.Right&&(p.x=t+f+d)),p}({initiatorCoordinates:t,popoverSize:i,initiatorSize:o,alignment:m,offset:c,direction:h,isFixed:f});return{coordinates:g,direction:h,alignment:m}};var W=i(43932),k=i.n(W);const L={x:0,y:0},R=e=>{let{children:t,isOpened:i=!0,initiatorCoordinates:n=L,calculatePositionStrategy:d=E,onEnterToPopover:s,onLeavePopover:f,isFixed:l,renderPopoverContent:u}=e;const{0:p,1:v}=(0,o.useState)(L),{0:h,1:m}=(0,o.useState)(a.Direction.Top),{0:S,1:y}=(0,o.useState)(a.Alignment.Middle),{0:w,1:x}=(0,o.useState)(!1),P=(0,o.useRef)(null);return(0,o.useEffect)((()=>{if(i&&P.current){const{offsetHeight:e,offsetWidth:t}=P.current,{coordinates:i,direction:o,alignment:r}=d({initiatorCoordinates:n,popoverSize:{height:e,width:t}});v(i),o&&m(o),r&&y(r),x(!0)}}),[i,n,P]),(0,o.useEffect)((()=>{i||x(!1)}),[i]),(0,c.bD)({shouldWatchChanges:w,delay:500,leading:!0,callback:()=>w&&f&&f()}),(0,g.jsx)(z,{children:i?(0,g.jsx)("div",{ref:P,onMouseEnter:s,onMouseLeave:f,className:r()(k().popover,{[k().popoverVisible]:w,[k().fixedPopover]:l}),style:{left:p.x,top:p.y},"data-tid":"1deec48e",children:u?u({direction:h,alignment:S}):t}):null})};var M=i(84689),Y=i(31386);const B=["startPosition","stateChangeDelay"];function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}const X=e=>{let{startPosition:t,stateChangeDelay:i=l}=e,n=(0,Y.Z)(e,B);const{0:r,1:c}=(0,o.useState)(!1),a=(0,o.useRef)(!1),{0:d,1:s}=(0,o.useState)(void 0),{0:f,1:u}=(0,o.useState)(void 0),{0:p,1:v}=(0,o.useState)({x:0,y:0});(0,o.useEffect)((()=>{t&&(d&&(clearTimeout(d),s(void 0),c(!1)),u(window.setTimeout((()=>{c(!0),v({x:t.x,y:t.y})}),200)))}),[t]),(0,o.useEffect)((()=>{t||(f&&(clearTimeout(f),u(void 0)),!r||a.current||d||s(window.setTimeout((()=>!a.current&&c(!1)),i)))}),[t,a.current,r]),(0,o.useEffect)((()=>()=>{f&&clearTimeout(f),d&&clearTimeout(d)}),[f,d]);const h=(0,o.useCallback)((()=>{a.current=!0,d&&(clearTimeout(d),s(void 0))}),[d]),m=(0,o.useCallback)((()=>{a.current=!1,s(window.setTimeout((()=>c(!1)),i))}),[]);return(0,g.jsx)(R,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?V(Object(i),!0).forEach((function(t){(0,M.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({onEnterToPopover:h,onLeavePopover:m,initiatorCoordinates:p,isOpened:r},n))}},28055:function(e,t,i){"use strict";i.d(t,{z:function(){return o.z}});var o=i(23100)},59408:function(e){e.exports={root:"styles_root__yoqWE"}},43932:function(e){e.exports={popover:"styles_popover__9ZEGA",fixedPopover:"styles_fixedPopover__QgV3E",popoverVisible:"styles_popoverVisible__U5HJk"}}}]);
//# sourceMappingURL=https://kinopoisk-frontend-internal.s3.mds.yandex.net/frontend-www/release/_next/static/chunks/9826-0c692c0516fa0e0f.js.map